<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Admin Dashboard</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }

        .container {
            width: 80%;
            margin: 0 auto;
            margin-top: 50px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }

        th {
            background-color: #4CAF50;
            color: white;
        }

        .elevate-button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 8px 12px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 14px;
            cursor: pointer;
        }
    </style>
</head>

<body>


<h2>Dishes</h2>

<table id="dishesTable">
    <thead>
    <tr>
        <th>Dish Name</th>
        <th>Price</th>
        <th>Category</th>
        <th>Update</th>
    </tr>
    </thead>
    <tbody>
    <!-- Rows will be filled with JavaScript -->
    </tbody>
</table>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const dishes = [
            // This data would ideally come from your server
            {id: 1, name: 'Dish 1', price: '10.99', category: 'LUNCH_SPECIAL'},
            {id: 2, name: 'Dish 2', price: '12.99', category: 'APPETIZER'}
            // Add more dishes as needed
        ];

        const categories = ['LUNCH_SPECIAL', 'APPETIZER', 'SOUP', 'CHEF_SUGGESTION', 'NOODLES_AND_RICE'];

        const tbody = document.querySelector('#dishesTable tbody');

        dishes.forEach(dish => {
            const tr = document.createElement('tr');
            tr.innerHTML = `
            <td><input type="text" value="${dish.name}" class="name" /></td>
            <td><input type="text" value="${dish.price}" class="price" /></td>
            <td>
                <select class="category">
                    ${categories.map(category => `<option value="${category}" ${dish.category === category ? 'selected' : ''}>${category}</option>`).join('')}
                </select>
            </td>
            <td><button class="updateBtn" data-id="${dish.id}">Update</button></td>
        `;
            tbody.appendChild(tr);
        });

        document.querySelectorAll('.updateBtn').forEach(button => {
            button.addEventListener('click', function () {
                const id = this.getAttribute('data-id');
                const tr = this.closest('tr');
                const name = tr.querySelector('.name').value;
                const price = tr.querySelector('.price').value;
                const category = tr.querySelector('.category').value;

                // Example AJAX request with Fetch API
                fetch('/updateDish', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        // Add any other headers your API requires
                    },
                    body: JSON.stringify({id, name, price, category})
                })
                    .then(response => response.json())
                    .then(data => {
                        console.log('Success:', data);
                        // Handle success response
                    })
                    .catch((error) => {
                        console.error('Error:', error);
                        // Handle errors
                    });
            });
        });
    });
</script>


</body>

</html>
